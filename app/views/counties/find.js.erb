name = '<%= @county[0].name %>'
id = '<%= @county[0].id %>'
Congo.dashboards.config.county_name = name;
Congo.dashboards.config.county_id = id;

function addSpinner() {
  var spinner = $('<div class="spinner-border float-right mr-2" role="status" id="spinner"></div>');
  $('#filter-container').after(spinner);
}

// Comprobamos si el overlay no está creado y adjuntado
if ($('.overlay').length == 0) {

  // Creamos y adjuntamos el overlay
  var overlay = document.createElement('div');
  overlay.className = 'overlay';
  $('#map').before(overlay);

};

// Comprobamos si el filter_container no está creado y adjuntado
if ($('#filter-container').length == 0) {

  // Creamos el div contenedor
  var filter_container = document.createElement('div');
  filter_container.className = 'card';
  filter_container.id = 'filter-container';

  // Creamos el card-header
  var filter_card_h = document.createElement('div');
  filter_card_h.className = 'card-header';
  filter_card_h.id = 'filter-header';

  // Creamos el collapse
  var filter_collapse = document.createElement('div');
  filter_collapse.className = 'collapse show';
  filter_collapse.id = 'filter-collapse';

  // Creamos el card-body
  var filter_card_b = document.createElement('div');
  filter_card_b.className = 'card-body';
  filter_card_b.id = 'filter-body';

  // TODO: Crear filter_card_h_title y filter_card_h_button dinámicos

  // Creamos título y boton minimizar
  var filter_card_h_button = '<button type="button" class="close" data-toggle="collapse" data-target="#filter-collapse"><i class="fas fa-window-minimize"></i></button>'
  var filter_card_h_title = '<b>Filtros</b>'

  // Adjuntamos los elementos
  $('.overlay').append(filter_container);
  $('#filter-container').append(filter_card_h, filter_collapse);
  $('#filter-collapse').append(filter_card_b);
  $('#filter-header').append(filter_card_h_button, filter_card_h_title);

};

addSpinner();

// Creamos el item
var filter_item = document.createElement('div');
filter_item.className = 'text-white bg-secondary px-2 mb-1 py-1 rounded';
filter_item.id = 'item-comuna';
var text_item = 'Comuna: '+name;

// Adjunta el item
$('#item-comuna').remove();
$('#filter-body').append(filter_item);
$('#item-comuna').append(text_item);

Congo.map_utils.counties();

$('#modal-counties').modal('hide')
